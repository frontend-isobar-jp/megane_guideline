!function(){function e(t,n,i){function r(s,l){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return r(n||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}return e}()({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../libs/j_utility");n["default"]=function(){var e=document.querySelector(".j-pagetop"),t=100,n="is-show",r=!1,o=function(){return window.pageYOffset},s=function(){o()>t?(r||(0,i.AddClass)(e,n),r=!0):(r&&(0,i.RemoveClass)(e,n),r=!1)};e&&(document.addEventListener("scroll",function(){s()}),document.addEventListener("load",function(){s()}))}},{"../libs/j_utility":5}],2:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("../libs/j_accordion_es"),o=i(r),s=e("../libs/j_getIncludes_es"),l=i(s),a=e("./_show_pagetop"),c=i(a),u=function(){var e=location.pathname.split("/guideline")[0],t=(new o["default"](".j-accordion",{toggleSpeed:100}),function(){for(var t=document.getElementById("header"),n=t.getElementsByTagName("img"),i=t.getElementsByTagName("a"),r=0;r<i.length;r++){var o=i[r].href;o.indexOf("megane-template.com")===-1&&(i[r].href=e+o.split(location.origin)[1])}for(var r=0;r<n.length;r++){var s=n[r].src;n[r].src=e+s.split(location.origin)[1]}}),n=function(){(0,c["default"])()};new l["default"]("#header",e+"/guideline/assets/include/header.html",t),new l["default"]("#footer",e+"/guideline/assets/include/footer.html",n)};n["default"]=u},{"../libs/j_accordion_es":3,"../libs/j_getIncludes_es":4,"./_show_pagetop":1}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n){i(this,e),this.selector=t,this.accordion=document.querySelectorAll(this.selector),null==n&&(n={}),this.toggleSpeed=n.toggleSpeed?n.toggleSpeed:1,this.btnElm=n.btnElm?n.btnElm:".j-accordion_btn",this.detailElm=n.detailElm?n.detailElm:".j-accordion_detail",this.OpenEnd=function(){},this.CloseEnd=function(){},this.clickFlag=!1,this.accordion[0]&&this.Init()}return r(e,[{key:"Init",value:function(){var e=this,t="overflow: hidden;";t+="transition: height "+this.toggleSpeed/1e3+"s ;",t+="-webkit-transition: height "+this.toggleSpeed/1e3+"s ;";for(var n=0;n<this.accordion.length;n++)for(var i=this.accordion[n].querySelectorAll(this.detailElm),r=this.accordion[n].querySelectorAll(this.btnElm),o=0;o<r.length;o++)i[o]&&(i[o].style.cssText=t,this.HasClass(i[o],"active")||(i[o].style.height="0px",i[o].style.display="none")),r[o].addEventListener("click",function(t){t.preventDefault(),e.Toggle(t)})}},{key:"Toggle",value:function(e){if(!this.accordion[0])return console.error(this.selector+": Not Found"),!1;var t=e.currentTarget?e.currentTarget:document.querySelectorAll(e)[0];this.HasClass(t,"active")?this.clickFlag||this.Close(e):this.clickFlag||this.Open(e)}},{key:"Open",value:function(e){var t=this;if(!this.accordion[0])return console.error(this.selector+": Not Found"),!1;this.clickFlag=!0;var n=e.currentTarget?e.currentTarget:document.querySelectorAll(e)[0],i=this.GetParent(n,this.selector),r=Array.prototype.indexOf.call(i.querySelectorAll(this.btnElm),n),o=i.querySelectorAll(this.detailElm)[r],s=function l(){t.clickFlag=!1,t.OpenEnd(r),o.style.height=null,o.removeEventListener("transitionend",l)};this.AddClass(n,"active"),this.AddClass(o,"active"),o.style.display="block",setTimeout(function(){o.style.height=o.scrollHeight+"px"},100),this.accordion[0].classList?o.addEventListener("transitionend",s,!1):this.clickFlag=!1}},{key:"Close",value:function(e){var t=this;if(!this.accordion[0])return console.error(this.selector+": Not Found"),!1;this.clickFlag=!0;var n=e.currentTarget?e.currentTarget:document.querySelectorAll(e)[0],i=this.GetParent(n,this.selector),r=Array.prototype.indexOf.call(i.querySelectorAll(this.btnElm),n),o=i.querySelectorAll(this.detailElm)[r],s=function l(){t.clickFlag=!1,t.CloseEnd(r),n.style.pointerEvents="inherit",o.style.display="none",o.removeEventListener("transitionend",l)};this.RemoveClass(n,"active"),this.RemoveClass(o,"active"),o.style.height=o.scrollHeight+"px",setTimeout(function(){o.style.height="0px"},100),this.accordion[0].classList?o.addEventListener("transitionend",s,!1):(o.style.display="none",this.clickFlag=!1)}},{key:"CloseIgnoreThis",value:function(e){function t(e){s[e].classList.remove("active"),setTimeout(function(){s[e].style.height="0px"},100)}if(!this.accordion[0])return console.error(this.selector+": Not Found"),!1;for(var n=e,i=this.GetParent(n,this.selector),r=Array.prototype.indexOf.call(i.querySelectorAll(this.btnElm),n),o=i.querySelectorAll(this.btnElm),s=i.querySelectorAll(this.detailElm),l=0;l<o.length;l++)l!=r&&(o[l].classList.remove("active"),t(l))}},{key:"GetParent",value:function(e,t){var n=e,i=0,r=void 0;for(r=t.split(".")[1]?t.split(".")[1]:t.split("#")[1]?t.split("#")[1]:t;i<100&&(n=n.parentNode,n.tagName.toLowerCase()!=r);){if(n.className){if(n.className.match(r))break}else if(n.id&&n.id.match(r))break;i++}return n}},{key:"AddClass",value:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t}},{key:"RemoveClass",value:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}},{key:"HasClass",value:function(e,t){var n=!1;return e.classList?e.classList.contains(t)&&(n=!0):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)&&(n=!0),n}}]),e}();n["default"]=o},{}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n,r){i(this,e),this.id=document.getElementById(t.split("#")[1]),this.path=n,this.func=null!=r?r:function(){},this.getHtml(this.id,this.path,this.func)}return r(e,[{key:"getHtml",value:function(e,t,n){var i=this,r=new XMLHttpRequest;r.open("GET",t,!0),r.onload=function(t){4===r.readyState&&(200===r.status?i.id&&(e.innerHTML=r.responseText,n()):alert("通信エラーが発生しました。\n恐れ入りますが、時間をおいてもう一度送信してください。"))},r.onerror=function(e){alert("通信エラーが発生しました。\n恐れ入りますが、時間をおいてもう一度送信してください。")},r.send(null)}}]),e}();n["default"]=o},{}],5:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},o=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},s=function(t,n){var i=!1;return t.classList?t.classList.contains(n)&&(i=!0):new RegExp("(^| )"+n+"( |$)","gi").test(e.target.className)&&(i=!0),i},l=function(e,t){var n="";for(var i in t)n+=""+i+":"+t[i]+"; ";e.style.cssText=n},a=function(e,t){var n,i=e,r=0;for(n=t.split(".")[1]?t.split(".")[1]:t.split("#")[1]?t.split("#")[1]:t;r<100&&(i=i.parentNode,i.tagName.toLowerCase()!=n);){if(i.className){if(i.className.match(n))break}else if(i.id&&i.id.match(n))break;r++}return i},c=function(e,t){var n=Array.prototype.filter.call(e.parentNode.children,function(n,i){for(var r=e.parentNode.querySelectorAll(t),o=null,i=0;i<r.length;i++)n===r[i]&&(o=r[i]);return n!==e&&n===o});return 0!=n.length?n:null},u=function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}},d=function(e){var t=window.getComputedStyle(e),n=e.offsetHeight,i=parseFloat(t.borderTopWidth),r=parseFloat(t.borderBottomWidth),o=parseFloat(t.paddingTop),s=parseFloat(t.paddingBottom),l={height:n,bordertop:i,borderBottom:r,paddingTop:o,paddingBottom:s,outerHeight:n+i+r+o+s};return l},f=function(e){var t=window.getComputedStyle(e),n=e.offsetWidth,i=parseFloat(t.borderLeftWidth),r=parseFloat(t.borderRightWidth),o=parseFloat(t.paddingLeft),s=parseFloat(t.paddingRight),l={width:n,borderLeft:i,borderRight:r,paddingLeft:o,paddingRight:s,outerWidth:n+i+r+o+s};return l},h=function(e,t){var n=!1,i=t.split(".")[1]?t.split(".")[1]:t.split("#")[1];return e.classList?e.classList.contains(i)&&(n=!0):new RegExp("(^| )"+i+"( |$)","gi").test(e.className)&&(n=!0),e.id==i&&(n=!0),n};i.AddClass=r,i.RemoveClass=o,i.HasClass=s,i.SetCss=l,i.GetParents=a,i.GetSiblings=c,i.Not=h,i.GetOffset=u,i.GetHeightData=d,i.GetWidthData=f},{}],6:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=e("./common/common"),o=i(r),s=function(){(0,o["default"])()};s()},{"./common/common":2}]},{},[6]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJtYWluLmpzIiwic3JjX2d1aWRlbGluZS9qcy9jb21tb24vX3Nob3dfcGFnZXRvcC5qcyIsInNyY19ndWlkZWxpbmUvanMvY29tbW9uL2NvbW1vbi5qcyIsInNyY19ndWlkZWxpbmUvanMvbGlicy9qX2FjY29yZGlvbl9lcy5qcyIsInNyY19ndWlkZWxpbmUvanMvbGlicy9qX2dldEluY2x1ZGVzX2VzLmpzIiwic3JjX2d1aWRlbGluZS9qcy9saWJzL2pfdXRpbGl0eS5qcyIsInNyY19ndWlkZWxpbmUvanMvbWFpbi5qcyJdLCJuYW1lcyI6WyJyIiwiZSIsIm4iLCJ0IiwibyIsImkiLCJmIiwiYyIsInJlcXVpcmUiLCJ1IiwiYSIsIkVycm9yIiwiY29kZSIsInAiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2pfdXRpbGl0eSIsIlRBUkdFVCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImludGVydmFsIiwiY2xhc3NOYW1lIiwic2hvd0ZsYWciLCJHZXRTY3JvbGxUb3BGdW5jIiwid2luZG93IiwicGFnZVlPZmZzZXQiLCJTaG93VG9nZ2xlRnVuYyIsIkFkZENsYXNzIiwiUmVtb3ZlQ2xhc3MiLCJhZGRFdmVudExpc3RlbmVyIiwiLi4vbGlicy9qX3V0aWxpdHkiLCIyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2pfYWNjb3JkaW9uX2VzIiwiX2pfYWNjb3JkaW9uX2VzMiIsIl9qX2dldEluY2x1ZGVzX2VzIiwiX2pfZ2V0SW5jbHVkZXNfZXMyIiwiX3Nob3dfcGFnZXRvcCIsIl9zaG93X3BhZ2V0b3AyIiwiSW5pdCIsInJvb3QiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwic3BsaXQiLCJBRlRFUl9IRUFERVIiLCJ0b2dnbGVTcGVlZCIsImhlYWRlciIsImdldEVsZW1lbnRCeUlkIiwiaGVhZGVySW1nIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJoZWFkZXJBIiwiaHJlZiIsImluZGV4T2YiLCJvcmlnaW4iLCJzcmMiLCJBRlRFUl9GT09URVIiLCIuLi9saWJzL2pfYWNjb3JkaW9uX2VzIiwiLi4vbGlicy9qX2dldEluY2x1ZGVzX2VzIiwiLi9fc2hvd19wYWdldG9wIiwiMyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiakFjY29yZGlvbiIsInNlbGVjdG9yIiwib3B0aW9uIiwidGhpcyIsImFjY29yZGlvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidG5FbG0iLCJkZXRhaWxFbG0iLCJPcGVuRW5kIiwiQ2xvc2VFbmQiLCJjbGlja0ZsYWciLCJfdGhpcyIsImluaXRDc3MiLCJERVRBSUwiLCJCVE4iLCJqIiwic3R5bGUiLCJjc3NUZXh0IiwiSGFzQ2xhc3MiLCJoZWlnaHQiLCJkaXNwbGF5IiwicHJldmVudERlZmF1bHQiLCJUb2dnbGUiLCJlbGVtZW50IiwiY29uc29sZSIsImVycm9yIiwiY3VycmVudFRhcmdldCIsIkNsb3NlIiwiT3BlbiIsIl90aGlzMiIsIlBBUkVOVCIsIkdldFBhcmVudCIsIklOREVYIiwiQXJyYXkiLCJUQVJHRVRfREVUQUlMIiwiRW5kRnVuYyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRUaW1lb3V0Iiwic2Nyb2xsSGVpZ2h0IiwiY2xhc3NMaXN0IiwiX3RoaXMzIiwicG9pbnRlckV2ZW50cyIsIkNsb3NlXyIsInJlbW92ZSIsIlRBUkdFVF9CVE4iLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwibWF0Y2giLCJpZCIsIl9jbGFzc05hbWUiLCJhZGQiLCJyZXBsYWNlIiwiUmVnRXhwIiwiam9pbiIsImlnbm9yZSIsImNvbnRhaW5zIiwidGVzdCIsIjQiLCJJbmNsdWRlIiwicyIsInBhdGgiLCJmdW5jIiwiZ2V0SHRtbCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJldmVudCIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJpbm5lckhUTUwiLCJyZXNwb25zZVRleHQiLCJhbGVydCIsIm9uZXJyb3IiLCJzZW5kIiwiNSIsIlNldENzcyIsInN0eWxlcyIsImNzcyIsIkdldFBhcmVudHMiLCJHZXRTaWJsaW5ncyIsImVsIiwic2libGluZ3MiLCJmaWx0ZXIiLCJjaGlsZHJlbiIsImNoaWxkIiwidGFyZ2V0RWxtIiwidGFyZ2V0XyIsIkdldE9mZnNldCIsIkJPWCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFRvcCIsImxlZnQiLCJwYWdlWE9mZnNldCIsImNsaWVudExlZnQiLCJHZXRIZWlnaHREYXRhIiwiU1RZTEVTIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIkgiLCJvZmZzZXRIZWlnaHQiLCJCVCIsInBhcnNlRmxvYXQiLCJib3JkZXJUb3BXaWR0aCIsIkJCIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJQVCIsInBhZGRpbmdUb3AiLCJQQiIsInBhZGRpbmdCb3R0b20iLCJEQVRBIiwiYm9yZGVydG9wIiwiYm9yZGVyQm90dG9tIiwib3V0ZXJIZWlnaHQiLCJHZXRXaWR0aERhdGEiLCJXIiwib2Zmc2V0V2lkdGgiLCJib3JkZXJMZWZ0V2lkdGgiLCJib3JkZXJSaWdodFdpZHRoIiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJ3aWR0aCIsImJvcmRlckxlZnQiLCJib3JkZXJSaWdodCIsIm91dGVyV2lkdGgiLCJOb3QiLCJpZ25vcmVUeHQiLCJJR1VOT1JFIiwi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U0FBQUEsRUw4Zkp6RixFSzdmSXFKLE9BQUFBLEVMOGZKckosRUs3Zkl3SixXQUFBQSxFTDhmSnhKLEVLN2ZJeUosWUFBQUEsRUw4Zkp6SixFSzdmSXVNLElBQUFBLEVMOGZKdk0sRUs3ZklpSyxVQUFBQSxFTDhmSmpLLEVLN2ZJMEssY0FBQUEsRUw4ZkoxSyxFSzdmSTRMLGFBQUFBLE9MK2ZFYyxHQUFHLFNBQVNoTixFQUFRVSxFQUFPSixHQUNqQyxZQU1BLFNBQVN3QixHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxVQUFTRixHTWp3QnZGLEdBQUFrTCxHQUFBak4sRUFBQSxtQk4rdkJJa04sRUFBV3BMLEVBQXVCbUwsR00zdkJoQ3pLLEVBQU8sWUFDWixFQUFBMEssRUFBQUEsY0FHRDFLLE9ObXdCRzJLLGtCQUFrQixTQUFTIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfal91dGlsaXR5ID0gcmVxdWlyZSgnLi4vbGlicy9qX3V0aWxpdHknKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gU2hvdyBUb2dnbGUgUGFnZXRvcFxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0dmFyIFRBUkdFVCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qLXBhZ2V0b3AnKTtcblxuXHR2YXIgaW50ZXJ2YWwgPSAxMDAsXG5cdCAgICBjbGFzc05hbWUgPSAnaXMtc2hvdycsXG5cdCAgICBzaG93RmxhZyA9IGZhbHNlLFxuXHQgICAgZml4RmxhZyA9IGZhbHNlO1xuXG5cdHZhciBHZXRTY3JvbGxUb3BGdW5jID0gZnVuY3Rpb24gR2V0U2Nyb2xsVG9wRnVuYygpIHtcblx0XHRyZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0O1xuXHR9O1xuXG5cdHZhciBTaG93VG9nZ2xlRnVuYyA9IGZ1bmN0aW9uIFNob3dUb2dnbGVGdW5jKCkge1xuXG5cdFx0aWYgKEdldFNjcm9sbFRvcEZ1bmMoKSA+IGludGVydmFsKSB7XG5cblx0XHRcdGlmICghc2hvd0ZsYWcpIHtcblx0XHRcdFx0KDAsIF9qX3V0aWxpdHkuQWRkQ2xhc3MpKFRBUkdFVCwgY2xhc3NOYW1lKTtcblx0XHRcdH1cblxuXHRcdFx0c2hvd0ZsYWcgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGlmIChzaG93RmxhZykge1xuXHRcdFx0XHQoMCwgX2pfdXRpbGl0eS5SZW1vdmVDbGFzcykoVEFSR0VULCBjbGFzc05hbWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRzaG93RmxhZyA9IGZhbHNlO1xuXHRcdH1cblx0fTtcblxuXHRpZiAoVEFSR0VUKSB7XG5cblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFNob3dUb2dnbGVGdW5jKCk7XG5cdFx0fSk7XG5cblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRTaG93VG9nZ2xlRnVuYygpO1xuXHRcdH0pO1xuXHR9XG59O1xuXG59LHtcIi4uL2xpYnMval91dGlsaXR5XCI6NX1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfal9hY2NvcmRpb25fZXMgPSByZXF1aXJlKCcuLi9saWJzL2pfYWNjb3JkaW9uX2VzJyk7XG5cbnZhciBfal9hY2NvcmRpb25fZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfal9hY2NvcmRpb25fZXMpO1xuXG52YXIgX2pfZ2V0SW5jbHVkZXNfZXMgPSByZXF1aXJlKCcuLi9saWJzL2pfZ2V0SW5jbHVkZXNfZXMnKTtcblxudmFyIF9qX2dldEluY2x1ZGVzX2VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2pfZ2V0SW5jbHVkZXNfZXMpO1xuXG52YXIgX3Nob3dfcGFnZXRvcCA9IHJlcXVpcmUoJy4vX3Nob3dfcGFnZXRvcCcpO1xuXG52YXIgX3Nob3dfcGFnZXRvcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaG93X3BhZ2V0b3ApO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgSW5pdCA9IGZ1bmN0aW9uIEluaXQoKSB7XG5cbiAgICB2YXIgcm9vdCA9IGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL2d1aWRlbGluZVwiKVswXTtcblxuICAgIC8vIEFDQ09SRElPTlxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIHZhciBKX0FDQ09SRElPTiA9IG5ldyBfal9hY2NvcmRpb25fZXMyLmRlZmF1bHQoXCIuai1hY2NvcmRpb25cIiwge1xuICAgICAgICB0b2dnbGVTcGVlZDogMTAwXG4gICAgfSk7XG5cbiAgICB2YXIgQUZURVJfSEVBREVSID0gZnVuY3Rpb24gQUZURVJfSEVBREVSKCkge1xuXG4gICAgICAgIC8vYSxpbWfjga7jg5Hjgrnoqr/mlbRcbiAgICAgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXInKSxcbiAgICAgICAgICAgIGhlYWRlckltZyA9IGhlYWRlci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJyksXG4gICAgICAgICAgICBoZWFkZXJBID0gaGVhZGVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXJBLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaHJlZiA9IGhlYWRlckFbaV0uaHJlZjtcbiAgICAgICAgICAgIGlmIChocmVmLmluZGV4T2YoXCJtZWdhbmUtdGVtcGxhdGUuY29tXCIpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGhlYWRlckFbaV0uaHJlZiA9IHJvb3QgKyBocmVmLnNwbGl0KGxvY2F0aW9uLm9yaWdpbilbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXJJbWcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzcmMgPSBoZWFkZXJJbWdbaV0uc3JjO1xuICAgICAgICAgICAgaGVhZGVySW1nW2ldLnNyYyA9IHJvb3QgKyBzcmMuc3BsaXQobG9jYXRpb24ub3JpZ2luKVsxXTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgQUZURVJfRk9PVEVSID0gZnVuY3Rpb24gQUZURVJfRk9PVEVSKCkge1xuXG4gICAgICAgIC8vIFNob3cgUGFnZXRvcFxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICgwLCBfc2hvd19wYWdldG9wMi5kZWZhdWx0KSgpO1xuICAgIH07XG5cbiAgICBuZXcgX2pfZ2V0SW5jbHVkZXNfZXMyLmRlZmF1bHQoJyNoZWFkZXInLCByb290ICsgJy9ndWlkZWxpbmUvYXNzZXRzL2luY2x1ZGUvaGVhZGVyLmh0bWwnLCBBRlRFUl9IRUFERVIpO1xuICAgIG5ldyBfal9nZXRJbmNsdWRlc19lczIuZGVmYXVsdCgnI2Zvb3RlcicsIHJvb3QgKyAnL2d1aWRlbGluZS9hc3NldHMvaW5jbHVkZS9mb290ZXIuaHRtbCcsIEFGVEVSX0ZPT1RFUik7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBJbml0O1xuXG59LHtcIi4uL2xpYnMval9hY2NvcmRpb25fZXNcIjozLFwiLi4vbGlicy9qX2dldEluY2x1ZGVzX2VzXCI6NCxcIi4vX3Nob3dfcGFnZXRvcFwiOjF9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qXG5cbk1lZ2FuZVRlbXBsYXRlXG5cblZlcnNpb246IDUuMC4wXG5XZWJzaXRlOiBodHRwOi8vbWVnYW5lLXRlbXBsYXRlLmNvbS9cbkxpY2Vuc2U6IERlbnRzdSBJc29iYXIgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuKi9cbnZhciBqQWNjb3JkaW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGpBY2NvcmRpb24oc2VsZWN0b3IsIG9wdGlvbikge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgakFjY29yZGlvbik7XG5cbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgICB0aGlzLmFjY29yZGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZWxlY3Rvcik7XG5cbiAgICAgICAgLy9vcHRpb25cbiAgICAgICAgaWYgKG9wdGlvbiA9PSBudWxsKSBvcHRpb24gPSB7fTtcbiAgICAgICAgdGhpcy50b2dnbGVTcGVlZCA9IG9wdGlvbi50b2dnbGVTcGVlZCA/IG9wdGlvbi50b2dnbGVTcGVlZCA6IDE7XG4gICAgICAgIHRoaXMuYnRuRWxtID0gb3B0aW9uLmJ0bkVsbSA/IG9wdGlvbi5idG5FbG0gOiBcIi5qLWFjY29yZGlvbl9idG5cIjtcbiAgICAgICAgdGhpcy5kZXRhaWxFbG0gPSBvcHRpb24uZGV0YWlsRWxtID8gb3B0aW9uLmRldGFpbEVsbSA6IFwiLmotYWNjb3JkaW9uX2RldGFpbFwiO1xuXG4gICAgICAgIHRoaXMuT3BlbkVuZCA9IGZ1bmN0aW9uICgpIHt9O1xuICAgICAgICB0aGlzLkNsb3NlRW5kID0gZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgdGhpcy5jbGlja0ZsYWcgPSBmYWxzZTtcblxuICAgICAgICBpZiAodGhpcy5hY2NvcmRpb25bMF0pIHtcbiAgICAgICAgICAgIHRoaXMuSW5pdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKipcbiAgICAqKiBJbml0XG4gICAgKipcbiAgICAqKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKGpBY2NvcmRpb24sIFt7XG4gICAgICAgIGtleTogXCJJbml0XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBJbml0KCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGluaXRDc3MgPSBcIm92ZXJmbG93OiBoaWRkZW47XCI7XG4gICAgICAgICAgICBpbml0Q3NzICs9IFwidHJhbnNpdGlvbjogaGVpZ2h0IFwiICsgdGhpcy50b2dnbGVTcGVlZCAvIDEwMDAgKyBcInMgO1wiO1xuICAgICAgICAgICAgaW5pdENzcyArPSBcIi13ZWJraXQtdHJhbnNpdGlvbjogaGVpZ2h0IFwiICsgdGhpcy50b2dnbGVTcGVlZCAvIDEwMDAgKyBcInMgO1wiO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYWNjb3JkaW9uLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgREVUQUlMID0gdGhpcy5hY2NvcmRpb25baV0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLmRldGFpbEVsbSk7XG4gICAgICAgICAgICAgICAgdmFyIEJUTiA9IHRoaXMuYWNjb3JkaW9uW2ldLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5idG5FbG0pO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBCVE4ubGVuZ3RoOyBqKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoREVUQUlMW2pdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBERVRBSUxbal0uc3R5bGUuY3NzVGV4dCA9IGluaXRDc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuSGFzQ2xhc3MoREVUQUlMW2pdLCBcImFjdGl2ZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERFVEFJTFtqXS5zdHlsZS5oZWlnaHQgPSBcIjBweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERFVEFJTFtqXS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBCVE5bal0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuVG9nZ2xlKGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgKipcbiAgICAgICAgKiogVG9nZ2xlXG4gICAgICAgICoqXG4gICAgICAgICoqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiVG9nZ2xlXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBUb2dnbGUoZWxlbWVudCkge1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuYWNjb3JkaW9uWzBdKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLnNlbGVjdG9yICsgXCI6IE5vdCBGb3VuZFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBUQVJHRVQgPSBlbGVtZW50LmN1cnJlbnRUYXJnZXQgPyBlbGVtZW50LmN1cnJlbnRUYXJnZXQgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnQpWzBdO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5IYXNDbGFzcyhUQVJHRVQsIFwiYWN0aXZlXCIpKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2xpY2tGbGFnKSB0aGlzLkNsb3NlKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jbGlja0ZsYWcpIHRoaXMuT3BlbihlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAqKlxuICAgICAgICAqKiBPcGVuLCBDbG9zZVxuICAgICAgICAqKlxuICAgICAgICAqKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIk9wZW5cIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIE9wZW4oZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5hY2NvcmRpb25bMF0pIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuc2VsZWN0b3IgKyBcIjogTm90IEZvdW5kXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jbGlja0ZsYWcgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgVEFSR0VUID0gZWxlbWVudC5jdXJyZW50VGFyZ2V0ID8gZWxlbWVudC5jdXJyZW50VGFyZ2V0IDogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50KVswXTtcbiAgICAgICAgICAgIHZhciBQQVJFTlQgPSB0aGlzLkdldFBhcmVudChUQVJHRVQsIHRoaXMuc2VsZWN0b3IpO1xuXG4gICAgICAgICAgICB2YXIgSU5ERVggPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKFBBUkVOVC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuYnRuRWxtKSwgVEFSR0VUKTtcblxuICAgICAgICAgICAgdmFyIFRBUkdFVF9ERVRBSUwgPSBQQVJFTlQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmRldGFpbEVsbSlbSU5ERVhdO1xuICAgICAgICAgICAgdmFyIEVuZEZ1bmMgPSBmdW5jdGlvbiBFbmRGdW5jKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMi5jbGlja0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpczIuT3BlbkVuZChJTkRFWCk7XG4gICAgICAgICAgICAgICAgVEFSR0VUX0RFVEFJTC5zdHlsZS5oZWlnaHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIFRBUkdFVF9ERVRBSUwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgRW5kRnVuYyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLkFkZENsYXNzKFRBUkdFVCwgXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB0aGlzLkFkZENsYXNzKFRBUkdFVF9ERVRBSUwsIFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICAgICBUQVJHRVRfREVUQUlMLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBUQVJHRVRfREVUQUlMLnN0eWxlLmhlaWdodCA9IFRBUkdFVF9ERVRBSUwuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgfSwgMTAwKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLmFjY29yZGlvblswXS5jbGFzc0xpc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBUQVJHRVRfREVUQUlMLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIEVuZEZ1bmMsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIkNsb3NlXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBDbG9zZShlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKCF0aGlzLmFjY29yZGlvblswXSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5zZWxlY3RvciArIFwiOiBOb3QgRm91bmRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNsaWNrRmxhZyA9IHRydWU7XG5cbiAgICAgICAgICAgIHZhciBUQVJHRVQgPSBlbGVtZW50LmN1cnJlbnRUYXJnZXQgPyBlbGVtZW50LmN1cnJlbnRUYXJnZXQgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnQpWzBdO1xuICAgICAgICAgICAgdmFyIFBBUkVOVCA9IHRoaXMuR2V0UGFyZW50KFRBUkdFVCwgdGhpcy5zZWxlY3Rvcik7XG5cbiAgICAgICAgICAgIHZhciBJTkRFWCA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoUEFSRU5ULnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5idG5FbG0pLCBUQVJHRVQpO1xuXG4gICAgICAgICAgICB2YXIgVEFSR0VUX0RFVEFJTCA9IFBBUkVOVC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuZGV0YWlsRWxtKVtJTkRFWF07XG4gICAgICAgICAgICB2YXIgRW5kRnVuYyA9IGZ1bmN0aW9uIEVuZEZ1bmMoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMzLmNsaWNrRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF90aGlzMy5DbG9zZUVuZChJTkRFWCk7XG4gICAgICAgICAgICAgICAgVEFSR0VULnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcImluaGVyaXRcIjtcbiAgICAgICAgICAgICAgICBUQVJHRVRfREVUQUlMLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBUQVJHRVRfREVUQUlMLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIEVuZEZ1bmMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy9cblxuICAgICAgICAgICAgdGhpcy5SZW1vdmVDbGFzcyhUQVJHRVQsIFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgdGhpcy5SZW1vdmVDbGFzcyhUQVJHRVRfREVUQUlMLCBcImFjdGl2ZVwiKTtcblxuICAgICAgICAgICAgVEFSR0VUX0RFVEFJTC5zdHlsZS5oZWlnaHQgPSBUQVJHRVRfREVUQUlMLnNjcm9sbEhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIFRBUkdFVF9ERVRBSUwuc3R5bGUuaGVpZ2h0ID0gXCIwcHhcIjtcbiAgICAgICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5hY2NvcmRpb25bMF0uY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICAgICAgLy9JRTlcblxuICAgICAgICAgICAgICAgIFRBUkdFVF9ERVRBSUwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgVEFSR0VUX0RFVEFJTC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBFbmRGdW5jLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJDbG9zZUlnbm9yZVRoaXNcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIENsb3NlSWdub3JlVGhpcyhlbGVtZW50KSB7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5hY2NvcmRpb25bMF0pIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuc2VsZWN0b3IgKyBcIjogTm90IEZvdW5kXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIFRBUkdFVCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgUEFSRU5UID0gdGhpcy5HZXRQYXJlbnQoVEFSR0VULCB0aGlzLnNlbGVjdG9yKTtcblxuICAgICAgICAgICAgdmFyIElOREVYID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChQQVJFTlQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmJ0bkVsbSksIFRBUkdFVCk7XG5cbiAgICAgICAgICAgIHZhciBUQVJHRVRfQlROID0gUEFSRU5ULnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5idG5FbG0pO1xuICAgICAgICAgICAgdmFyIFRBUkdFVF9ERVRBSUwgPSBQQVJFTlQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmRldGFpbEVsbSk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVEFSR0VUX0JUTi5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgaWYgKGkgIT0gSU5ERVgpIHtcbiAgICAgICAgICAgICAgICAgICAgVEFSR0VUX0JUTltpXS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICAgICBDbG9zZV8oaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBDbG9zZV8oaSkge1xuXG4gICAgICAgICAgICAgICAgVEFSR0VUX0RFVEFJTFtpXS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIFRBUkdFVF9ERVRBSUxbaV0uc3R5bGUuaGVpZ2h0ID0gXCIwcHhcIjtcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICoqXG4gICAgICAgICoqIEdldFBhcmVudFxuICAgICAgICAqKlxuICAgICAgICAqKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIkdldFBhcmVudFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gR2V0UGFyZW50KGVsZW1lbnQsIHRhcmdldCkge1xuXG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gZWxlbWVudCxcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICB0ID0gdm9pZCAwO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0LnNwbGl0KFwiLlwiKVsxXSkge1xuXG4gICAgICAgICAgICAgICAgdCA9IHRhcmdldC5zcGxpdChcIi5cIilbMV07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5zcGxpdChcIiNcIilbMV0pIHtcblxuICAgICAgICAgICAgICAgIHQgPSB0YXJnZXQuc3BsaXQoXCIjXCIpWzFdO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIHQgPSB0YXJnZXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdoaWxlIChpIDwgMTAwKSB7XG5cbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcblxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IHQpIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudC5jbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudC5jbGFzc05hbWUubWF0Y2godCkpIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyZW50LmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQuaWQubWF0Y2godCkpIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIkFkZENsYXNzXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBBZGRDbGFzcyhlbGVtZW50LCBfY2xhc3NOYW1lKSB7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChfY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gJyAnICsgX2NsYXNzTmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIlJlbW92ZUNsYXNzXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBSZW1vdmVDbGFzcyhlbGVtZW50LCBfY2xhc3NOYW1lKSB7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShfY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBfY2xhc3NOYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyhcXFxcYnwkKScsICdnaScpLCAnICcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiSGFzQ2xhc3NcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIEhhc0NsYXNzKGVsZW1lbnQsIF9jbGFzc05hbWUpIHtcblxuICAgICAgICAgICAgdmFyIGlnbm9yZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoX2NsYXNzTmFtZSkpIGlnbm9yZSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKCcoXnwgKScgKyBfY2xhc3NOYW1lICsgJyggfCQpJywgJ2dpJykudGVzdChlbGVtZW50LmNsYXNzTmFtZSkpIGlnbm9yZSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBpZ25vcmU7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gakFjY29yZGlvbjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gakFjY29yZGlvbjtcblxufSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKlxuXG5NZWdhbmVUZW1wbGF0ZVxuXG5WZXJzaW9uOiA1LjAuMFxuV2Vic2l0ZTogaHR0cDovL21lZ2FuZS10ZW1wbGF0ZS5jb20vXG5MaWNlbnNlOiBEZW50c3UgSXNvYmFyIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiovXG5cbnZhciBJbmNsdWRlID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEluY2x1ZGUodCwgcywgZikge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSW5jbHVkZSk7XG5cbiAgICAgICAgdGhpcy5pZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuc3BsaXQoXCIjXCIpWzFdKTtcbiAgICAgICAgdGhpcy5wYXRoID0gcztcbiAgICAgICAgdGhpcy5mdW5jID0gZiAhPSBudWxsID8gZiA6IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICAgIHRoaXMuZ2V0SHRtbCh0aGlzLmlkLCB0aGlzLnBhdGgsIHRoaXMuZnVuYyk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEluY2x1ZGUsIFt7XG4gICAgICAgIGtleTogXCJnZXRIdG1sXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRIdG1sKHRhcmdldCwgc3JjLCBmdW5jKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgcmVxdWVzdC5vcGVuKFwiR0VUXCIsIHNyYywgdHJ1ZSk7XG5cbiAgICAgICAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5pbm5lckhUTUwgPSByZXF1ZXN0LnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn6YCa5L+h44Ko44Op44O844GM55m655Sf44GX44G+44GX44Gf44CCXFxu5oGQ44KM5YWl44KK44G+44GZ44GM44CB5pmC6ZaT44KS44GK44GE44Gm44KC44GG5LiA5bqm6YCB5L+h44GX44Gm44GP44Gg44GV44GE44CCJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBhbGVydCgn6YCa5L+h44Ko44Op44O844GM55m655Sf44GX44G+44GX44Gf44CCXFxu5oGQ44KM5YWl44KK44G+44GZ44GM44CB5pmC6ZaT44KS44GK44GE44Gm44KC44GG5LiA5bqm6YCB5L+h44GX44Gm44GP44Gg44GV44GE44CCJyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXF1ZXN0LnNlbmQobnVsbCk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gSW5jbHVkZTtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gSW5jbHVkZTtcblxufSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbi8qXG5cbk1lZ2FuZVRlbXBsYXRlXG5cblZlcnNpb246IDUuMC4wXG5XZWJzaXRlOiBodHRwOi8vbWVnYW5lLXRlbXBsYXRlLmNvbS9cbkxpY2Vuc2U6IERlbnRzdSBJc29iYXIgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuKi9cblxudmFyIEFkZENsYXNzID0gZnVuY3Rpb24gQWRkQ2xhc3MoZWxlbWVudCwgX2NsYXNzTmFtZSkge1xuXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChfY2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSArPSAnICcgKyBfY2xhc3NOYW1lO1xuICAgIH1cbn07XG5cbnZhciBSZW1vdmVDbGFzcyA9IGZ1bmN0aW9uIFJlbW92ZUNsYXNzKGVsZW1lbnQsIF9jbGFzc05hbWUpIHtcblxuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoX2NsYXNzTmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBfY2xhc3NOYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyhcXFxcYnwkKScsICdnaScpLCAnICcpO1xuICAgIH1cbn07XG5cbnZhciBIYXNDbGFzcyA9IGZ1bmN0aW9uIEhhc0NsYXNzKGVsZW1lbnQsIF9jbGFzc05hbWUpIHtcblxuICAgIHZhciBpZ25vcmUgPSBmYWxzZTtcblxuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoX2NsYXNzTmFtZSkpIGlnbm9yZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG5ldyBSZWdFeHAoJyhefCApJyArIF9jbGFzc05hbWUgKyAnKCB8JCknLCAnZ2knKS50ZXN0KGUudGFyZ2V0LmNsYXNzTmFtZSkpIGlnbm9yZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlnbm9yZTtcbn07XG5cbnZhciBUb2dnbGVDbGFzcyA9IGZ1bmN0aW9uIFRvZ2dsZUNsYXNzKGVsZW1lbnQsIF9jbGFzc05hbWUpIHtcblxuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2xhc3NlcyA9IGVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XG4gICAgICAgIHZhciBleGlzdGluZ0luZGV4ID0gY2xhc3Nlcy5pbmRleE9mKGNsYXNzTmFtZSk7XG5cbiAgICAgICAgaWYgKGV4aXN0aW5nSW5kZXggPj0gMCkgY2xhc3Nlcy5zcGxpY2UoZXhpc3RpbmdJbmRleCwgMSk7ZWxzZSBjbGFzc2VzLnB1c2goY2xhc3NOYW1lKTtcblxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpO1xuICAgIH1cbn07XG5cbnZhciBTZXRDc3MgPSBmdW5jdGlvbiBTZXRDc3MoZWxlbWVudCwgc3R5bGVzKSB7XG5cbiAgICB2YXIgY3NzID0gXCJcIjtcblxuICAgIGZvciAodmFyIGtleSBpbiBzdHlsZXMpIHtcbiAgICAgICAgY3NzICs9IFwiXCIgKyBrZXkgKyBcIjpcIiArIHN0eWxlc1trZXldICsgXCI7IFwiO1xuICAgIH1cblxuICAgIGVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9IGNzcztcbn07XG5cbnZhciBHZXRQYXJlbnRzID0gZnVuY3Rpb24gR2V0UGFyZW50cyhlbGVtZW50LCB0YXJnZXQpIHtcblxuICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LFxuICAgICAgICBpID0gMCxcbiAgICAgICAgdDtcblxuICAgIGlmICh0YXJnZXQuc3BsaXQoXCIuXCIpWzFdKSB7XG4gICAgICAgIHQgPSB0YXJnZXQuc3BsaXQoXCIuXCIpWzFdO1xuICAgIH0gZWxzZSBpZiAodGFyZ2V0LnNwbGl0KFwiI1wiKVsxXSkge1xuICAgICAgICB0ID0gdGFyZ2V0LnNwbGl0KFwiI1wiKVsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0ID0gdGFyZ2V0O1xuICAgIH1cbiAgICB3aGlsZSAoaSA8IDEwMCkge1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKHBhcmVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gdCkgYnJlYWs7XG4gICAgICAgIGlmIChwYXJlbnQuY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50LmNsYXNzTmFtZS5tYXRjaCh0KSkgYnJlYWs7XG4gICAgICAgIH0gZWxzZSBpZiAocGFyZW50LmlkKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50LmlkLm1hdGNoKHQpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBwYXJlbnQ7XG59O1xuXG52YXIgR2V0U2libGluZ3MgPSBmdW5jdGlvbiBHZXRTaWJsaW5ncyhlbCwgdGFyZ2V0KSB7XG5cbiAgICB2YXIgc2libGluZ3MgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZWwucGFyZW50Tm9kZS5jaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkLCBpKSB7XG5cbiAgICAgICAgdmFyIHRhcmdldEVsbSA9IGVsLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCh0YXJnZXQpO1xuICAgICAgICB2YXIgdGFyZ2V0XyA9IG51bGw7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRFbG0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjaGlsZCA9PT0gdGFyZ2V0RWxtW2ldKSB0YXJnZXRfID0gdGFyZ2V0RWxtW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNoaWxkICE9PSBlbCAmJiBjaGlsZCA9PT0gdGFyZ2V0XztcbiAgICB9KTtcblxuICAgIHJldHVybiBzaWJsaW5ncy5sZW5ndGggIT0gMCA/IHNpYmxpbmdzIDogbnVsbDtcbn07XG5cbnZhciBHZXRPZmZzZXQgPSBmdW5jdGlvbiBHZXRPZmZzZXQoZWxlbWVudCkge1xuXG4gICAgdmFyIEJPWCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IEJPWC50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQgLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50VG9wLFxuICAgICAgICBsZWZ0OiBCT1gubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRMZWZ0XG4gICAgfTtcbn07XG5cbnZhciBHZXRIZWlnaHREYXRhID0gZnVuY3Rpb24gR2V0SGVpZ2h0RGF0YShlbGVtZW50KSB7XG5cbiAgICB2YXIgU1RZTEVTID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgdmFyIEggPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB2YXIgQlQgPSBwYXJzZUZsb2F0KFNUWUxFUy5ib3JkZXJUb3BXaWR0aCk7XG4gICAgdmFyIEJCID0gcGFyc2VGbG9hdChTVFlMRVMuYm9yZGVyQm90dG9tV2lkdGgpO1xuICAgIHZhciBQVCA9IHBhcnNlRmxvYXQoU1RZTEVTLnBhZGRpbmdUb3ApO1xuICAgIHZhciBQQiA9IHBhcnNlRmxvYXQoU1RZTEVTLnBhZGRpbmdCb3R0b20pO1xuXG4gICAgdmFyIERBVEEgPSB7XG4gICAgICAgIFwiaGVpZ2h0XCI6IEgsXG4gICAgICAgIFwiYm9yZGVydG9wXCI6IEJULFxuICAgICAgICBcImJvcmRlckJvdHRvbVwiOiBCQixcbiAgICAgICAgXCJwYWRkaW5nVG9wXCI6IFBULFxuICAgICAgICBcInBhZGRpbmdCb3R0b21cIjogUEIsXG4gICAgICAgIFwib3V0ZXJIZWlnaHRcIjogSCArIEJUICsgQkIgKyBQVCArIFBCXG4gICAgfTtcblxuICAgIHJldHVybiBEQVRBO1xufTtcblxudmFyIEdldFdpZHRoRGF0YSA9IGZ1bmN0aW9uIEdldFdpZHRoRGF0YShlbGVtZW50KSB7XG5cbiAgICB2YXIgU1RZTEVTID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgdmFyIFcgPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgIHZhciBCVCA9IHBhcnNlRmxvYXQoU1RZTEVTLmJvcmRlckxlZnRXaWR0aCk7XG4gICAgdmFyIEJCID0gcGFyc2VGbG9hdChTVFlMRVMuYm9yZGVyUmlnaHRXaWR0aCk7XG4gICAgdmFyIFBUID0gcGFyc2VGbG9hdChTVFlMRVMucGFkZGluZ0xlZnQpO1xuICAgIHZhciBQQiA9IHBhcnNlRmxvYXQoU1RZTEVTLnBhZGRpbmdSaWdodCk7XG5cbiAgICB2YXIgREFUQSA9IHtcbiAgICAgICAgXCJ3aWR0aFwiOiBXLFxuICAgICAgICBcImJvcmRlckxlZnRcIjogQlQsXG4gICAgICAgIFwiYm9yZGVyUmlnaHRcIjogQkIsXG4gICAgICAgIFwicGFkZGluZ0xlZnRcIjogUFQsXG4gICAgICAgIFwicGFkZGluZ1JpZ2h0XCI6IFBCLFxuICAgICAgICBcIm91dGVyV2lkdGhcIjogVyArIEJUICsgQkIgKyBQVCArIFBCXG4gICAgfTtcblxuICAgIHJldHVybiBEQVRBO1xufTtcblxudmFyIE5vdCA9IGZ1bmN0aW9uIE5vdChlbGVtZW50LCBpZ25vcmVUeHQpIHtcblxuICAgIHZhciBpZ25vcmUgPSBmYWxzZTtcblxuICAgIHZhciBJR1VOT1JFID0gaWdub3JlVHh0LnNwbGl0KFwiLlwiKVsxXSA/IGlnbm9yZVR4dC5zcGxpdChcIi5cIilbMV0gOiBpZ25vcmVUeHQuc3BsaXQoXCIjXCIpWzFdO1xuXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhJR1VOT1JFKSkgaWdub3JlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobmV3IFJlZ0V4cCgnKF58ICknICsgSUdVTk9SRSArICcoIHwkKScsICdnaScpLnRlc3QoZWxlbWVudC5jbGFzc05hbWUpKSBpZ25vcmUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoZWxlbWVudC5pZCA9PSBJR1VOT1JFKSBpZ25vcmUgPSB0cnVlO1xuXG4gICAgcmV0dXJuIGlnbm9yZTtcbn07XG5cbi8vIGNvbnN0IEFkZGVkRWxtSGFuZGxlciA9IGZ1bmN0aW9uKCBlbG0sIGNhbGxiYWNrLCBoYW5kbGVyICkge1xuLy9cbi8vICAgICBjb25zdCBFVkVOVCA9ICFoYW5kbGVyID8gXCJjbGlja1wiIDogaGFuZGxlcjtcbi8vXG4vLyAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggRVZFTlQsIChlKSA9PiB7XG4vLyAgICAgICAgIGxldCBoaXQgPSBmYWxzZSxcbi8vICAgICAgICAgICAgIHQ7XG4vLyAgICAgICAgIGlmICggZWxtLnNwbGl0KFwiLlwiKVsxXSApIHtcbi8vICAgICAgICAgICAgIHQgPSBlbG0uc3BsaXQoXCIuXCIpWzFdO1xuLy8gICAgICAgICB9IGVsc2UgaWYgKCBlbG0uc3BsaXQoXCIjXCIpWzFdICkge1xuLy8gICAgICAgICAgICAgdCA9IGVsbS5zcGxpdChcIiNcIilbMV07XG4vLyAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgICB0ID0gZWxtO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGlmKCBlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gdCApIHtcbi8vICAgICAgICAgICAgIGhpdCA9IHRydWU7XG4vLyAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgICBpZiggZS50YXJnZXQuY2xhc3NOYW1lICkge1xuLy8gICAgICAgICAgICAgICAgIGlmKCBlLnRhcmdldC5jbGFzc05hbWUubWF0Y2goIHQgKSApIGhpdCA9IHRydWU7XG4vLyAgICAgICAgICAgICB9IGVsc2UgaWYoIGUudGFyZ2V0LmlkICkge1xuLy8gICAgICAgICAgICAgICAgIGlmKCBlLnRhcmdldC5pZC5tYXRjaCggdCApICkgaGl0ID0gdHJ1ZTtcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgICAgICBpZiggaGl0ICkge1xuLy8gICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgICAgICAgICAgY2FsbGJhY2soIGUgKTtcbi8vICAgICAgICAgfVxuLy8gICAgIH0pXG4vL1xuLy8gfVxuXG4vLyBjb25zdCBDcmVhdFZpZGVvID0gZnVuY3Rpb24oIHNyYywgb3B0aW9uICkge1xuLy9cbi8vICAgICB2YXIgbG9vcCA9ICBvcHRpb24ubG9vcDtcbi8vICAgICB2YXIgdm9sdW1lID0gIG9wdGlvbi52b2x1bWU7XG4vLyAgICAgdmFyIGNvbnRyb2xzID0gIG9wdGlvbi5jb250cm9scztcbi8vICAgICB2YXIgbm9kb3dubG9hZCA9ICBvcHRpb24ubm9kb3dubG9hZDtcbi8vICAgICB2YXIgbm9Db250ZXh0bWVudSA9ICBvcHRpb24ubm9Db250ZXh0bWVudTtcbi8vXG4vLyAgICAgdmFyIHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3ZpZGVvJyApO1xuLy8gICAgIHZpZGVvLnNldEF0dHJpYnV0ZShcInBsYXlzaW5saW5lXCIsIHRydWUpO1xuLy8gICAgIGlmKCBjb250cm9scyApIHZpZGVvLnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsIFwiY29udHJvbHNcIik7XG4vLyAgICAgaWYoIG5vZG93bmxvYWQgKSB2aWRlby5zZXRBdHRyaWJ1dGUoXCJjb250cm9sc2xpc3RcIiwgXCJub2Rvd25sb2FkXCIpO1xuLy8gICAgIGlmKCBub0NvbnRleHRtZW51ICkgdmlkZW8uc2V0QXR0cmlidXRlKFwib25Db250ZXh0bWVudVwiLCBcInJldHVybiBmYWxzZVwiKTtcbi8vXG4vLyAgICAgdmlkZW8ubG9vcCA9IGxvb3A7XG4vLyAgICAgdmlkZW8udm9sdW1lID0gdm9sdW1lO1xuLy8gICAgIHZpZGVvLnNyYyA9IHNyYztcbi8vICAgICB2aWRlby5sb2FkKCk7XG4vL1xuLy8gICAgIHJldHVybiB2aWRlbztcbi8vXG4vLyB9XG5cbi8vLy9cblxuZXhwb3J0cy5BZGRDbGFzcyA9IEFkZENsYXNzO1xuZXhwb3J0cy5SZW1vdmVDbGFzcyA9IFJlbW92ZUNsYXNzO1xuZXhwb3J0cy5IYXNDbGFzcyA9IEhhc0NsYXNzO1xuZXhwb3J0cy5TZXRDc3MgPSBTZXRDc3M7XG5leHBvcnRzLkdldFBhcmVudHMgPSBHZXRQYXJlbnRzO1xuZXhwb3J0cy5HZXRTaWJsaW5ncyA9IEdldFNpYmxpbmdzO1xuZXhwb3J0cy5Ob3QgPSBOb3Q7XG5leHBvcnRzLkdldE9mZnNldCA9IEdldE9mZnNldDtcbmV4cG9ydHMuR2V0SGVpZ2h0RGF0YSA9IEdldEhlaWdodERhdGE7XG5leHBvcnRzLkdldFdpZHRoRGF0YSA9IEdldFdpZHRoRGF0YTtcblxufSx7fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY29tbW9uID0gcmVxdWlyZSgnLi9jb21tb24vY29tbW9uJyk7XG5cbnZhciBfY29tbW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbW1vbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8vLy9cblxudmFyIEluaXQgPSBmdW5jdGlvbiBJbml0KCkge1xuXHQoMCwgX2NvbW1vbjIuZGVmYXVsdCkoKTtcbn07XG5cbkluaXQoKTtcblxufSx7XCIuL2NvbW1vbi9jb21tb25cIjoyfV19LHt9LFs2XSlcblxuIiwiaW1wb3J0IHsgQWRkQ2xhc3MsIFJlbW92ZUNsYXNzIH0gZnJvbSAnLi4vbGlicy9qX3V0aWxpdHknO1xuXG5leHBvcnQgZGVmYXVsdCAoKSA9PiB7XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBTaG93IFRvZ2dsZSBQYWdldG9wXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRjb25zdCBUQVJHRVQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuai1wYWdldG9wJyk7XG5cblx0bGV0IGludGVydmFsID0gMTAwLFxuXHRcdGNsYXNzTmFtZSA9ICdpcy1zaG93Jyxcblx0XHRzaG93RmxhZyA9IGZhbHNlLFxuXHRcdGZpeEZsYWcgPSBmYWxzZTtcblxuXG5cdGNvbnN0IEdldFNjcm9sbFRvcEZ1bmMgPSAoKSA9PiB7XG5cdFx0cmV0dXJuIHdpbmRvdy5wYWdlWU9mZnNldDtcblx0fVxuXG5cblx0Y29uc3QgU2hvd1RvZ2dsZUZ1bmMgPSAoKSA9PiB7XG5cblx0XHRpZiggR2V0U2Nyb2xsVG9wRnVuYygpID4gaW50ZXJ2YWwgKXtcblxuXHRcdFx0aWYoICFzaG93RmxhZyApe1xuXHRcdFx0XHRBZGRDbGFzcyggVEFSR0VULCBjbGFzc05hbWUgKTtcblx0XHRcdH1cblxuXHRcdFx0c2hvd0ZsYWcgPSB0cnVlO1xuXG5cdFx0fWVsc2V7XG5cblx0XHRcdGlmKCBzaG93RmxhZyApe1xuXHRcdFx0XHRSZW1vdmVDbGFzcyggVEFSR0VULCBjbGFzc05hbWUgKTtcblx0XHRcdH1cblxuXHRcdFx0c2hvd0ZsYWcgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXG5cdGlmKCBUQVJHRVQgKXtcblxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcblxuXHRcdFx0U2hvd1RvZ2dsZUZ1bmMoKTtcblxuXHRcdH0pXG5cblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuXG5cdFx0XHRTaG93VG9nZ2xlRnVuYygpO1xuXG5cdFx0fSlcblxuXHR9XG5cblxuXG59XG4iLCJpbXBvcnQgakFjY29yZGlvbiBmcm9tICcuLi9saWJzL2pfYWNjb3JkaW9uX2VzJztcbmltcG9ydCBHZXRJbmNsdWRlcyBmcm9tICcuLi9saWJzL2pfZ2V0SW5jbHVkZXNfZXMnO1xuXG5pbXBvcnQgc2hvd1BhZ2V0b3AgZnJvbSAnLi9fc2hvd19wYWdldG9wJztcblxuY29uc3QgSW5pdCA9ICAoKSA9PiB7XG5cbiAgICBsZXQgcm9vdCA9IGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL2d1aWRlbGluZVwiKVswXTtcblxuICAgIC8vIEFDQ09SRElPTlxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIGNvbnN0IEpfQUNDT1JESU9OID0gbmV3IGpBY2NvcmRpb24oXG4gICAgICAgIFwiLmotYWNjb3JkaW9uXCIsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRvZ2dsZVNwZWVkOiAxMDBcbiAgICAgICAgfVxuICAgICk7XG5cbiAgICBjb25zdCBBRlRFUl9IRUFERVIgPSAoKT0+IHtcblxuICAgICAgICAvL2EsaW1n44Gu44OR44K56Kq/5pW0XG4gICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyJyksXG4gICAgICAgICAgICBoZWFkZXJJbWcgPSBoZWFkZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ltZycpLFxuICAgICAgICAgICAgaGVhZGVyQSA9IGhlYWRlci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYScpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVyQS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGhyZWYgPSBoZWFkZXJBW2ldLmhyZWY7XG4gICAgICAgICAgICBpZiggaHJlZi5pbmRleE9mKFwibWVnYW5lLXRlbXBsYXRlLmNvbVwiKSA9PT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyQVtpXS5ocmVmID0gcm9vdCArIGhyZWYuc3BsaXQobG9jYXRpb24ub3JpZ2luKVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlYWRlckltZy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHNyYyA9IGhlYWRlckltZ1tpXS5zcmM7XG4gICAgICAgICAgICBoZWFkZXJJbWdbaV0uc3JjID0gcm9vdCArIHNyYy5zcGxpdChsb2NhdGlvbi5vcmlnaW4pWzFdO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBjb25zdCBBRlRFUl9GT09URVIgPSAoKT0+IHtcblxuICAgICAgICAvLyBTaG93IFBhZ2V0b3BcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBzaG93UGFnZXRvcCgpO1xuXG4gICAgfVxuXG4gICAgbmV3IEdldEluY2x1ZGVzKCcjaGVhZGVyJywgcm9vdCArICcvZ3VpZGVsaW5lL2Fzc2V0cy9pbmNsdWRlL2hlYWRlci5odG1sJywgQUZURVJfSEVBREVSKTtcbiAgICBuZXcgR2V0SW5jbHVkZXMoJyNmb290ZXInLCByb290ICsgJy9ndWlkZWxpbmUvYXNzZXRzL2luY2x1ZGUvZm9vdGVyLmh0bWwnLCBBRlRFUl9GT09URVIpO1xuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEluaXQ7XG4iLCIvKlxuXG5NZWdhbmVUZW1wbGF0ZVxuXG5WZXJzaW9uOiA1LjAuMFxuV2Vic2l0ZTogaHR0cDovL21lZ2FuZS10ZW1wbGF0ZS5jb20vXG5MaWNlbnNlOiBEZW50c3UgSXNvYmFyIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBqQWNjb3JkaW9uIHtcblxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBvcHRpb24pIHtcblxuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggdGhpcy5zZWxlY3RvciApO1xuXG4gICAgICAgIC8vb3B0aW9uXG4gICAgICAgIGlmKG9wdGlvbiA9PSBudWxsKSBvcHRpb24gPSB7fTtcbiAgICAgICAgdGhpcy50b2dnbGVTcGVlZCA9IG9wdGlvbi50b2dnbGVTcGVlZCA/IG9wdGlvbi50b2dnbGVTcGVlZCA6IDE7XG4gICAgICAgIHRoaXMuYnRuRWxtID0gb3B0aW9uLmJ0bkVsbSA/IG9wdGlvbi5idG5FbG0gOiBcIi5qLWFjY29yZGlvbl9idG5cIjtcbiAgICAgICAgdGhpcy5kZXRhaWxFbG0gPSBvcHRpb24uZGV0YWlsRWxtID8gb3B0aW9uLmRldGFpbEVsbSA6IFwiLmotYWNjb3JkaW9uX2RldGFpbFwiO1xuXG4gICAgICAgIHRoaXMuT3BlbkVuZCA9IGZ1bmN0aW9uKCl7fTtcbiAgICAgICAgdGhpcy5DbG9zZUVuZCA9IGZ1bmN0aW9uKCl7fTtcblxuICAgICAgICB0aGlzLmNsaWNrRmxhZyA9IGZhbHNlO1xuXG4gICAgICAgIGlmICh0aGlzLmFjY29yZGlvblswXSkge1xuICAgICAgICAgICAgdGhpcy5Jbml0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAqKlxuICAgICoqIEluaXRcbiAgICAqKlxuICAgICoqL1xuICAgIEluaXQoKSB7XG5cbiAgICAgICAgbGV0IGluaXRDc3MgPSBcIm92ZXJmbG93OiBoaWRkZW47XCI7XG4gICAgICAgICAgICBpbml0Q3NzICs9IFwidHJhbnNpdGlvbjogaGVpZ2h0IFwiICsgdGhpcy50b2dnbGVTcGVlZC8xMDAwICtcInMgO1wiO1xuICAgICAgICAgICAgaW5pdENzcyArPSBcIi13ZWJraXQtdHJhbnNpdGlvbjogaGVpZ2h0IFwiICsgdGhpcy50b2dnbGVTcGVlZC8xMDAwICtcInMgO1wiO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hY2NvcmRpb24ubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgY29uc3QgREVUQUlMID0gdGhpcy5hY2NvcmRpb25baV0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLmRldGFpbEVsbSk7XG4gICAgICAgICAgICBjb25zdCBCVE4gPSB0aGlzLmFjY29yZGlvbltpXS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuYnRuRWxtKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBCVE4ubGVuZ3RoOyBqKyspIHtcblxuICAgICAgICAgICAgICAgIGlmKCBERVRBSUxbal0gKSB7XG4gICAgICAgICAgICAgICAgICAgIERFVEFJTFtqXS5zdHlsZS5jc3NUZXh0ID0gaW5pdENzcztcbiAgICAgICAgICAgICAgICAgICAgaWYoICF0aGlzLkhhc0NsYXNzKCBERVRBSUxbal0sIFwiYWN0aXZlXCIgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERFVEFJTFtqXS5zdHlsZS5oZWlnaHQgPSBcIjBweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgREVUQUlMW2pdLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEJUTltqXS5hZGRFdmVudExpc3RlbmVyKCBcImNsaWNrXCIsICggZSApID0+IHtcblxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Ub2dnbGUoIGUgKTtcblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAqKlxuICAgICoqIFRvZ2dsZVxuICAgICoqXG4gICAgKiovXG4gICAgVG9nZ2xlKCBlbGVtZW50ICkge1xuXG4gICAgICAgIGlmKCF0aGlzLmFjY29yZGlvblswXSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvciggdGhpcy5zZWxlY3RvciArIFwiOiBOb3QgRm91bmRcIiApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgVEFSR0VUID0gZWxlbWVudC5jdXJyZW50VGFyZ2V0ID8gZWxlbWVudC5jdXJyZW50VGFyZ2V0IDogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggZWxlbWVudCApWzBdO1xuXG4gICAgICAgIGlmKCB0aGlzLkhhc0NsYXNzKCBUQVJHRVQsIFwiYWN0aXZlXCIgKSApe1xuXG4gICAgICAgICAgICBpZiggIXRoaXMuY2xpY2tGbGFnICkgdGhpcy5DbG9zZSggZWxlbWVudCApO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGlmKCAhdGhpcy5jbGlja0ZsYWcgKSB0aGlzLk9wZW4oIGVsZW1lbnQgKTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICoqXG4gICAgKiogT3BlbiwgQ2xvc2VcbiAgICAqKlxuICAgICoqL1xuICAgIE9wZW4oZWxlbWVudCkge1xuXG4gICAgICAgIGlmKCF0aGlzLmFjY29yZGlvblswXSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvciggdGhpcy5zZWxlY3RvciArIFwiOiBOb3QgRm91bmRcIiApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jbGlja0ZsYWcgPSB0cnVlO1xuXG4gICAgICAgIGNvbnN0IFRBUkdFVCA9IGVsZW1lbnQuY3VycmVudFRhcmdldCA/IGVsZW1lbnQuY3VycmVudFRhcmdldCA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIGVsZW1lbnQgKVswXTtcbiAgICAgICAgY29uc3QgUEFSRU5UID0gdGhpcy5HZXRQYXJlbnQoIFRBUkdFVCwgdGhpcy5zZWxlY3RvciApO1xuXG4gICAgICAgIGNvbnN0IElOREVYID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCggUEFSRU5ULnF1ZXJ5U2VsZWN0b3JBbGwoIHRoaXMuYnRuRWxtICksIFRBUkdFVCApO1xuXG4gICAgICAgIGNvbnN0IFRBUkdFVF9ERVRBSUwgPSBQQVJFTlQucXVlcnlTZWxlY3RvckFsbCggdGhpcy5kZXRhaWxFbG0gKVsgSU5ERVggXTtcbiAgICAgICAgY29uc3QgRW5kRnVuYyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLk9wZW5FbmQoIElOREVYICk7XG4gICAgICAgICAgICBUQVJHRVRfREVUQUlMLnN0eWxlLmhlaWdodCA9IG51bGw7XG4gICAgICAgICAgICBUQVJHRVRfREVUQUlMLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIEVuZEZ1bmMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuQWRkQ2xhc3MoVEFSR0VULFwiYWN0aXZlXCIpO1xuICAgICAgICB0aGlzLkFkZENsYXNzKFRBUkdFVF9ERVRBSUwsXCJhY3RpdmVcIik7XG5cbiAgICAgICAgVEFSR0VUX0RFVEFJTC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsgVEFSR0VUX0RFVEFJTC5zdHlsZS5oZWlnaHQgPSBUQVJHRVRfREVUQUlMLnNjcm9sbEhlaWdodCArIFwicHhcIjsgfSwgMTAwKTtcblxuICAgICAgICBpZiggIXRoaXMuYWNjb3JkaW9uWzBdLmNsYXNzTGlzdCApIHtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tGbGFnID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBUQVJHRVRfREVUQUlMLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIEVuZEZ1bmMsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgQ2xvc2UoIGVsZW1lbnQgKSB7XG5cbiAgICAgICAgaWYoIXRoaXMuYWNjb3JkaW9uWzBdKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCB0aGlzLnNlbGVjdG9yICsgXCI6IE5vdCBGb3VuZFwiICk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNsaWNrRmxhZyA9IHRydWU7XG5cbiAgICAgICAgY29uc3QgVEFSR0VUID0gZWxlbWVudC5jdXJyZW50VGFyZ2V0ID8gZWxlbWVudC5jdXJyZW50VGFyZ2V0IDogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggZWxlbWVudCApWzBdO1xuICAgICAgICBjb25zdCBQQVJFTlQgPSB0aGlzLkdldFBhcmVudCggVEFSR0VULCB0aGlzLnNlbGVjdG9yICk7XG5cbiAgICAgICAgY29uc3QgSU5ERVggPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKCBQQVJFTlQucXVlcnlTZWxlY3RvckFsbCggdGhpcy5idG5FbG0gKSwgVEFSR0VUICk7XG5cbiAgICAgICAgY29uc3QgVEFSR0VUX0RFVEFJTCA9IFBBUkVOVC5xdWVyeVNlbGVjdG9yQWxsKCB0aGlzLmRldGFpbEVsbSApWyBJTkRFWCBdO1xuICAgICAgICBjb25zdCBFbmRGdW5jID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbGlja0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuQ2xvc2VFbmQoIElOREVYICk7XG4gICAgICAgICAgICBUQVJHRVQuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiaW5oZXJpdFwiO1xuICAgICAgICAgICAgVEFSR0VUX0RFVEFJTC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICBUQVJHRVRfREVUQUlMLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIEVuZEZ1bmMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vXG5cbiAgICAgICAgdGhpcy5SZW1vdmVDbGFzcyhUQVJHRVQsXCJhY3RpdmVcIik7XG4gICAgICAgIHRoaXMuUmVtb3ZlQ2xhc3MoVEFSR0VUX0RFVEFJTCxcImFjdGl2ZVwiKTtcblxuICAgICAgICBUQVJHRVRfREVUQUlMLnN0eWxlLmhlaWdodCA9IFRBUkdFVF9ERVRBSUwuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsgVEFSR0VUX0RFVEFJTC5zdHlsZS5oZWlnaHQgPSBcIjBweFwiOyB9LCAxMDApO1xuXG4gICAgICAgIGlmKCAhdGhpcy5hY2NvcmRpb25bMF0uY2xhc3NMaXN0ICkgeyAvL0lFOVxuXG4gICAgICAgICAgICBUQVJHRVRfREVUQUlMLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tGbGFnID0gZmFsc2U7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgVEFSR0VUX0RFVEFJTC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBFbmRGdW5jLCBmYWxzZSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgQ2xvc2VJZ25vcmVUaGlzKCBlbGVtZW50ICkge1xuXG4gICAgICAgIGlmKCF0aGlzLmFjY29yZGlvblswXSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvciggdGhpcy5zZWxlY3RvciArIFwiOiBOb3QgRm91bmRcIiApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgVEFSR0VUID0gZWxlbWVudDtcbiAgICAgICAgY29uc3QgUEFSRU5UID0gdGhpcy5HZXRQYXJlbnQoIFRBUkdFVCwgdGhpcy5zZWxlY3RvciApO1xuXG4gICAgICAgIGNvbnN0IElOREVYID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCggUEFSRU5ULnF1ZXJ5U2VsZWN0b3JBbGwoIHRoaXMuYnRuRWxtICksIFRBUkdFVCApO1xuXG4gICAgICAgIGNvbnN0IFRBUkdFVF9CVE4gPSBQQVJFTlQucXVlcnlTZWxlY3RvckFsbCggdGhpcy5idG5FbG0gKTtcbiAgICAgICAgY29uc3QgVEFSR0VUX0RFVEFJTCA9IFBBUkVOVC5xdWVyeVNlbGVjdG9yQWxsKCB0aGlzLmRldGFpbEVsbSApO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVEFSR0VUX0JUTi5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICBpZiggaSAhPSBJTkRFWCApIHtcbiAgICAgICAgICAgICAgICBUQVJHRVRfQlROW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgQ2xvc2VfKCBpICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vXG5cbiAgICAgICAgZnVuY3Rpb24gQ2xvc2VfKCBpICkge1xuXG4gICAgICAgICAgICBUQVJHRVRfREVUQUlMW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoICgpID0+IHsgVEFSR0VUX0RFVEFJTFtpXS5zdHlsZS5oZWlnaHQgPSBcIjBweFwiOyB9LCAxMDApO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgKipcbiAgICAqKiBHZXRQYXJlbnRcbiAgICAqKlxuICAgICoqL1xuICAgIEdldFBhcmVudCggZWxlbWVudCwgdGFyZ2V0ICkge1xuXG4gICAgICAgIGxldCBwYXJlbnQgPSBlbGVtZW50LFxuICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICB0O1xuXG4gICAgICAgIGlmICggdGFyZ2V0LnNwbGl0KFwiLlwiKVsxXSApIHtcblxuICAgICAgICAgICAgdCA9IHRhcmdldC5zcGxpdChcIi5cIilbMV07XG5cbiAgICAgICAgfSBlbHNlIGlmICggdGFyZ2V0LnNwbGl0KFwiI1wiKVsxXSApIHtcblxuICAgICAgICAgICAgdCA9IHRhcmdldC5zcGxpdChcIiNcIilbMV07XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgdCA9IHRhcmdldDtcblxuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKCBpIDwgMTAwICl7XG5cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuXG4gICAgICAgICAgICBpZiggcGFyZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSB0ICkgYnJlYWs7XG5cbiAgICAgICAgICAgIGlmKCBwYXJlbnQuY2xhc3NOYW1lICkge1xuICAgICAgICAgICAgICAgIGlmKCBwYXJlbnQuY2xhc3NOYW1lLm1hdGNoKCB0ICkgKSBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiggcGFyZW50LmlkICkge1xuICAgICAgICAgICAgICAgIGlmKCBwYXJlbnQuaWQubWF0Y2goIHQgKSApIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpKys7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXJlbnQ7XG5cbiAgICB9XG5cbiAgICBBZGRDbGFzcyggZWxlbWVudCwgX2NsYXNzTmFtZSApIHtcblxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChfY2xhc3NOYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lICs9ICcgJyArIF9jbGFzc05hbWU7XG4gICAgICAgIH1cblxuICAgIH1cbiAgICBSZW1vdmVDbGFzcyggZWxlbWVudCwgX2NsYXNzTmFtZSApIHtcblxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShfY2xhc3NOYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXFxcYiknICsgX2NsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnKTtcbiAgICAgICAgfVxuXG4gICAgfVxuICAgIEhhc0NsYXNzKCBlbGVtZW50LCBfY2xhc3NOYW1lICkge1xuXG4gICAgICAgIHZhciBpZ25vcmUgPSBmYWxzZTtcblxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgICAgICAgIGlmKCBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhfY2xhc3NOYW1lKSApIGlnbm9yZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiggbmV3IFJlZ0V4cCgnKF58ICknICsgX2NsYXNzTmFtZSArICcoIHwkKScsICdnaScpLnRlc3QoIGVsZW1lbnQuY2xhc3NOYW1lICkgKSBpZ25vcmUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlnbm9yZTtcblxuICAgIH1cblxuXG59XG4iLCIvKlxuXG5NZWdhbmVUZW1wbGF0ZVxuXG5WZXJzaW9uOiA1LjAuMFxuV2Vic2l0ZTogaHR0cDovL21lZ2FuZS10ZW1wbGF0ZS5jb20vXG5MaWNlbnNlOiBEZW50c3UgSXNvYmFyIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluY2x1ZGUge1xuXG4gICAgY29uc3RydWN0b3IodCwgcyAsZikge1xuXG4gICAgICAgIHRoaXMuaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0LnNwbGl0KFwiI1wiKVsxXSk7XG4gICAgICAgIHRoaXMucGF0aCA9IHM7XG4gICAgICAgIHRoaXMuZnVuYyA9IGYgIT0gbnVsbCA/IGYgOiBmdW5jdGlvbigpe307XG5cbiAgICAgICAgdGhpcy5nZXRIdG1sKHRoaXMuaWQsIHRoaXMucGF0aCwgdGhpcy5mdW5jKVxuXG4gICAgfVxuXG4gICAgZ2V0SHRtbCh0YXJnZXQsIHNyYywgZnVuYykge1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxdWVzdC5vcGVuKFwiR0VUXCIsIHNyYywgdHJ1ZSk7XG5cbiAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSAoZXZlbnQpID0+IHtcblxuICAgICAgICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHRoaXMuaWQgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5pbm5lckhUTUwgPSByZXF1ZXN0LnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+mAmuS/oeOCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBn+OAglxcbuaBkOOCjOWFpeOCiuOBvuOBmeOBjOOAgeaZgumWk+OCkuOBiuOBhOOBpuOCguOBhuS4gOW6pumAgeS/oeOBl+OBpuOBj+OBoOOBleOBhOOAgicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgYWxlcnQoJ+mAmuS/oeOCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBn+OAglxcbuaBkOOCjOWFpeOCiuOBvuOBmeOBjOOAgeaZgumWk+OCkuOBiuOBhOOBpuOCguOBhuS4gOW6pumAgeS/oeOBl+OBpuOBj+OBoOOBleOBhOOAgicpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlcXVlc3Quc2VuZChudWxsKTtcblxuICAgIH1cblxufVxuIiwiLypcblxuTWVnYW5lVGVtcGxhdGVcblxuVmVyc2lvbjogNS4wLjBcbldlYnNpdGU6IGh0dHA6Ly9tZWdhbmUtdGVtcGxhdGUuY29tL1xuTGljZW5zZTogRGVudHN1IElzb2JhciBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4qL1xuXG52YXIgQWRkQ2xhc3MgPSBmdW5jdGlvbiggZWxlbWVudCwgX2NsYXNzTmFtZSApIHtcblxuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoX2NsYXNzTmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gJyAnICsgX2NsYXNzTmFtZTtcbiAgICB9XG5cbn1cblxudmFyIFJlbW92ZUNsYXNzID0gZnVuY3Rpb24oIGVsZW1lbnQsIF9jbGFzc05hbWUgKSB7XG5cbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKF9jbGFzc05hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXFxcYiknICsgX2NsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnKTtcbiAgICB9XG5cbn1cblxudmFyIEhhc0NsYXNzID0gZnVuY3Rpb24oIGVsZW1lbnQsIF9jbGFzc05hbWUgKSB7XG5cbiAgICB2YXIgaWdub3JlID0gZmFsc2U7XG5cbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgICAgaWYoIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKF9jbGFzc05hbWUpICkgaWdub3JlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiggbmV3IFJlZ0V4cCgnKF58ICknICsgX2NsYXNzTmFtZSArICcoIHwkKScsICdnaScpLnRlc3QoIGUudGFyZ2V0LmNsYXNzTmFtZSApICkgaWdub3JlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaWdub3JlO1xuXG59XG5cbnZhciBUb2dnbGVDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtZW50LCBfY2xhc3NOYW1lICkge1xuXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNsYXNzZXMgPSBlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xuICAgICAgdmFyIGV4aXN0aW5nSW5kZXggPSBjbGFzc2VzLmluZGV4T2YoY2xhc3NOYW1lKTtcblxuICAgICAgaWYgKGV4aXN0aW5nSW5kZXggPj0gMClcbiAgICAgICAgY2xhc3Nlcy5zcGxpY2UoZXhpc3RpbmdJbmRleCwgMSk7XG4gICAgICBlbHNlXG4gICAgICAgIGNsYXNzZXMucHVzaChjbGFzc05hbWUpO1xuXG4gICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpO1xuICAgIH1cblxufVxuXG52YXIgU2V0Q3NzID0gZnVuY3Rpb24oIGVsZW1lbnQsIHN0eWxlcyApIHtcblxuICAgIHZhciBjc3MgPSBcIlwiO1xuXG4gICAgZm9yICh2YXIga2V5IGluIHN0eWxlcykge1xuICAgICAgICBjc3MgKz0gXCJcIisga2V5ICtcIjpcIisgc3R5bGVzW2tleV0gK1wiOyBcIjtcbiAgICB9XG5cbiAgICBlbGVtZW50LnN0eWxlLmNzc1RleHQgPSBjc3M7XG5cbn1cblxudmFyIEdldFBhcmVudHMgPSBmdW5jdGlvbiggZWxlbWVudCwgdGFyZ2V0ICkge1xuXG4gICAgdmFyIHBhcmVudCA9IGVsZW1lbnQsIGkgPSAwLCB0O1xuXG4gICAgaWYgKCB0YXJnZXQuc3BsaXQoXCIuXCIpWzFdICkge1xuICAgICAgICB0ID0gdGFyZ2V0LnNwbGl0KFwiLlwiKVsxXTtcbiAgICB9IGVsc2UgaWYgKCB0YXJnZXQuc3BsaXQoXCIjXCIpWzFdICkge1xuICAgICAgICB0ID0gdGFyZ2V0LnNwbGl0KFwiI1wiKVsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0ID0gdGFyZ2V0O1xuICAgIH1cbiAgICB3aGlsZSAoIGkgPCAxMDAgKXtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG4gICAgICAgIGlmKCBwYXJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IHQgKSBicmVhaztcbiAgICAgICAgaWYoIHBhcmVudC5jbGFzc05hbWUgKSB7XG4gICAgICAgICAgICBpZiggcGFyZW50LmNsYXNzTmFtZS5tYXRjaCggdCApICkgYnJlYWs7XG4gICAgICAgIH0gZWxzZSBpZiggcGFyZW50LmlkICkge1xuICAgICAgICAgICAgaWYoIHBhcmVudC5pZC5tYXRjaCggdCApICkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4gcGFyZW50O1xufVxuXG52YXIgR2V0U2libGluZ3MgPSBmdW5jdGlvbiggZWwsIHRhcmdldCApIHtcblxuICAgIHZhciBzaWJsaW5ncyA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChlbC5wYXJlbnROb2RlLmNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCxpKXtcblxuICAgICAgICB2YXIgdGFyZ2V0RWxtID0gZWwucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKHRhcmdldCk7XG4gICAgICAgIHZhciB0YXJnZXRfID0gbnVsbDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldEVsbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNoaWxkID09PSB0YXJnZXRFbG1baV0pIHRhcmdldF8gPSB0YXJnZXRFbG1baV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2hpbGQgIT09IGVsICYmIGNoaWxkID09PSB0YXJnZXRfO1xuXG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2libGluZ3MubGVuZ3RoICE9IDAgPyBzaWJsaW5ncyA6IG51bGw7XG5cbn1cblxudmFyIEdldE9mZnNldCA9IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xuXG4gICAgdmFyIEJPWCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IEJPWC50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQgLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50VG9wLFxuICAgICAgICBsZWZ0OiBCT1gubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRMZWZ0XG4gICAgfVxufVxuXG52YXIgR2V0SGVpZ2h0RGF0YSA9IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xuXG4gICAgdmFyIFNUWUxFUyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtZW50ICk7XG4gICAgdmFyIEggPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB2YXIgQlQgPSBwYXJzZUZsb2F0KFNUWUxFUy5ib3JkZXJUb3BXaWR0aCk7XG4gICAgdmFyIEJCID0gcGFyc2VGbG9hdChTVFlMRVMuYm9yZGVyQm90dG9tV2lkdGgpO1xuICAgIHZhciBQVCA9IHBhcnNlRmxvYXQoU1RZTEVTLnBhZGRpbmdUb3ApO1xuICAgIHZhciBQQiA9IHBhcnNlRmxvYXQoU1RZTEVTLnBhZGRpbmdCb3R0b20pO1xuXG4gICAgdmFyIERBVEEgPSB7XG4gICAgICAgIFwiaGVpZ2h0XCI6IEgsXG4gICAgICAgIFwiYm9yZGVydG9wXCI6IEJULFxuICAgICAgICBcImJvcmRlckJvdHRvbVwiOiBCQixcbiAgICAgICAgXCJwYWRkaW5nVG9wXCI6IFBULFxuICAgICAgICBcInBhZGRpbmdCb3R0b21cIjogUEIsXG4gICAgICAgIFwib3V0ZXJIZWlnaHRcIjogSCArIEJUICsgQkIgKyBQVCArIFBCXG4gICAgfVxuXG4gICAgcmV0dXJuIERBVEE7XG59XG5cbnZhciBHZXRXaWR0aERhdGEgPSBmdW5jdGlvbiggZWxlbWVudCApIHtcblxuICAgIHZhciBTVFlMRVMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbWVudCApO1xuICAgIHZhciBXID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICB2YXIgQlQgPSBwYXJzZUZsb2F0KFNUWUxFUy5ib3JkZXJMZWZ0V2lkdGgpO1xuICAgIHZhciBCQiA9IHBhcnNlRmxvYXQoU1RZTEVTLmJvcmRlclJpZ2h0V2lkdGgpO1xuICAgIHZhciBQVCA9IHBhcnNlRmxvYXQoU1RZTEVTLnBhZGRpbmdMZWZ0KTtcbiAgICB2YXIgUEIgPSBwYXJzZUZsb2F0KFNUWUxFUy5wYWRkaW5nUmlnaHQpO1xuXG4gICAgdmFyIERBVEEgPSB7XG4gICAgICAgIFwid2lkdGhcIjogVyxcbiAgICAgICAgXCJib3JkZXJMZWZ0XCI6IEJULFxuICAgICAgICBcImJvcmRlclJpZ2h0XCI6IEJCLFxuICAgICAgICBcInBhZGRpbmdMZWZ0XCI6IFBULFxuICAgICAgICBcInBhZGRpbmdSaWdodFwiOiBQQixcbiAgICAgICAgXCJvdXRlcldpZHRoXCI6IFcgKyBCVCArIEJCICsgUFQgKyBQQlxuICAgIH1cblxuICAgIHJldHVybiBEQVRBO1xufVxuXG52YXIgTm90ID0gZnVuY3Rpb24oIGVsZW1lbnQsIGlnbm9yZVR4dCApIHtcblxuICAgIHZhciBpZ25vcmUgPSBmYWxzZTtcblxuICAgIHZhciBJR1VOT1JFID0gaWdub3JlVHh0LnNwbGl0KFwiLlwiKVsxXSA/IGlnbm9yZVR4dC5zcGxpdChcIi5cIilbMV0gOiBpZ25vcmVUeHQuc3BsaXQoXCIjXCIpWzFdO1xuXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGlmKCBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhJR1VOT1JFKSApIGlnbm9yZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYoIG5ldyBSZWdFeHAoJyhefCApJyArIElHVU5PUkUgKyAnKCB8JCknLCAnZ2knKS50ZXN0KCBlbGVtZW50LmNsYXNzTmFtZSApICkgaWdub3JlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYoIGVsZW1lbnQuaWQgPT0gSUdVTk9SRSApIGlnbm9yZSA9IHRydWU7XG5cbiAgICByZXR1cm4gaWdub3JlO1xufVxuXG4vLyBjb25zdCBBZGRlZEVsbUhhbmRsZXIgPSBmdW5jdGlvbiggZWxtLCBjYWxsYmFjaywgaGFuZGxlciApIHtcbi8vXG4vLyAgICAgY29uc3QgRVZFTlQgPSAhaGFuZGxlciA/IFwiY2xpY2tcIiA6IGhhbmRsZXI7XG4vL1xuLy8gICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIEVWRU5ULCAoZSkgPT4ge1xuLy8gICAgICAgICBsZXQgaGl0ID0gZmFsc2UsXG4vLyAgICAgICAgICAgICB0O1xuLy8gICAgICAgICBpZiAoIGVsbS5zcGxpdChcIi5cIilbMV0gKSB7XG4vLyAgICAgICAgICAgICB0ID0gZWxtLnNwbGl0KFwiLlwiKVsxXTtcbi8vICAgICAgICAgfSBlbHNlIGlmICggZWxtLnNwbGl0KFwiI1wiKVsxXSApIHtcbi8vICAgICAgICAgICAgIHQgPSBlbG0uc3BsaXQoXCIjXCIpWzFdO1xuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgdCA9IGVsbTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBpZiggZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IHQgKSB7XG4vLyAgICAgICAgICAgICBoaXQgPSB0cnVlO1xuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgaWYoIGUudGFyZ2V0LmNsYXNzTmFtZSApIHtcbi8vICAgICAgICAgICAgICAgICBpZiggZS50YXJnZXQuY2xhc3NOYW1lLm1hdGNoKCB0ICkgKSBoaXQgPSB0cnVlO1xuLy8gICAgICAgICAgICAgfSBlbHNlIGlmKCBlLnRhcmdldC5pZCApIHtcbi8vICAgICAgICAgICAgICAgICBpZiggZS50YXJnZXQuaWQubWF0Y2goIHQgKSApIGhpdCA9IHRydWU7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgaWYoIGhpdCApIHtcbi8vICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgICAgIGNhbGxiYWNrKCBlICk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9KVxuLy9cbi8vIH1cblxuLy8gY29uc3QgQ3JlYXRWaWRlbyA9IGZ1bmN0aW9uKCBzcmMsIG9wdGlvbiApIHtcbi8vXG4vLyAgICAgdmFyIGxvb3AgPSAgb3B0aW9uLmxvb3A7XG4vLyAgICAgdmFyIHZvbHVtZSA9ICBvcHRpb24udm9sdW1lO1xuLy8gICAgIHZhciBjb250cm9scyA9ICBvcHRpb24uY29udHJvbHM7XG4vLyAgICAgdmFyIG5vZG93bmxvYWQgPSAgb3B0aW9uLm5vZG93bmxvYWQ7XG4vLyAgICAgdmFyIG5vQ29udGV4dG1lbnUgPSAgb3B0aW9uLm5vQ29udGV4dG1lbnU7XG4vL1xuLy8gICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd2aWRlbycgKTtcbi8vICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoXCJwbGF5c2lubGluZVwiLCB0cnVlKTtcbi8vICAgICBpZiggY29udHJvbHMgKSB2aWRlby5zZXRBdHRyaWJ1dGUoXCJjb250cm9sc1wiLCBcImNvbnRyb2xzXCIpO1xuLy8gICAgIGlmKCBub2Rvd25sb2FkICkgdmlkZW8uc2V0QXR0cmlidXRlKFwiY29udHJvbHNsaXN0XCIsIFwibm9kb3dubG9hZFwiKTtcbi8vICAgICBpZiggbm9Db250ZXh0bWVudSApIHZpZGVvLnNldEF0dHJpYnV0ZShcIm9uQ29udGV4dG1lbnVcIiwgXCJyZXR1cm4gZmFsc2VcIik7XG4vL1xuLy8gICAgIHZpZGVvLmxvb3AgPSBsb29wO1xuLy8gICAgIHZpZGVvLnZvbHVtZSA9IHZvbHVtZTtcbi8vICAgICB2aWRlby5zcmMgPSBzcmM7XG4vLyAgICAgdmlkZW8ubG9hZCgpO1xuLy9cbi8vICAgICByZXR1cm4gdmlkZW87XG4vL1xuLy8gfVxuXG4vLy8vXG5cbmV4cG9ydCB7XG4gICAgQWRkQ2xhc3MsXG4gICAgUmVtb3ZlQ2xhc3MsXG4gICAgSGFzQ2xhc3MsXG4gICAgU2V0Q3NzLFxuICAgIEdldFBhcmVudHMsXG4gICAgR2V0U2libGluZ3MsXG4gICAgTm90LFxuICAgIEdldE9mZnNldCxcbiAgICBHZXRIZWlnaHREYXRhLFxuICAgIEdldFdpZHRoRGF0YSxcbiAgICAvLyBBZGRlZEVsbUhhbmRsZXIsXG4gICAgLy8gQ3JlYXRWaWRlb1xufVxuIiwiaW1wb3J0IENvbW1vbiBmcm9tICcuL2NvbW1vbi9jb21tb24nO1xuXG4vLy8vXG5cbmNvbnN0IEluaXQgPSAoKSA9PiB7XG5cdENvbW1vbigpO1xufVxuXG5Jbml0KCk7XG4iXX0=
